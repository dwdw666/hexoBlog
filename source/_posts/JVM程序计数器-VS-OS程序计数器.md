---
title: JVM程序计数器 VS OS程序计数器
date: 2022-02-10 21:25:57
tags: 
categories: Java
---

学完了操作系统后在学到jvm时看到了程序计数器，那他们有什么关系呢？

jvm内存模型中的PC程序计数器 与 OS操作系统程序计数器 的关系

### **JVM程序计数器：**

程序计数器是一块较小的内存空间，它的作用可以看作是**当前线程所执行的字节码的行号指示器**。在虚拟机的概念模型里**字节码解释器**工作时就是通过改变这个计数器的值来选取下一条需要执行的字节码指令，分支、循环、跳转、异常处理、线程恢复等基础功能都需要依赖这个计数器来完成。- - 摘自《深入理解Java虚拟机》

### **OS程序计数器**

为了保证程序(在操作系统中理解为进程)能够连续地执行下去，CPU必须具有某些手段来确定下一条指令的地址。而程序计数器正是起到这种作用，所以通常又称为指令计数器。在程序开始执行前，必须将它的起始地址，即程序的一条指令所在的内存单元地址送入PC，因此程序计数器（PC）的内容即是从内存提取的第一条指令的地址。当执行指令时，CPU将自动修改PC的内容，即每执行一条指令PC增加一个量，这个量等于指令所含的字节数，以便使其保持的总是将要执行的下一条指令的地址。由于大多数指令都是按顺序来执行的，所以修改的过程通常只是简单的对PC加1。 当程序转移时，转移指令执行的最终结果就是要改变PC的值，此PC值就是转去的地址，以此实现转移。有些机器中也称PC为指令指针IP（Instruction Pointer）

总滴来说JVM中的程序计数器是对cpu的程序计数器的一种抽象他只是JVM内存空间中的一小块内存，**并不是真正的物理寄存器**。